## 项目总结：前端 Web 开发中的虚拟滚动列表

### 1.使用的技术
- 框架与工具：Vue 3 + TypeScript + Vite，结合 Composition API 构建组件。
- 组件库与插件：
  - 使用 axios 处理数据请求。
  - 使用 lodash-es 提供的 throttle 方法优化滚动监听性能。
  - 使用 ResizeObserver 动态监听 DOM 元素尺寸变化。
- 其他技术：
  - 虚拟滚动实现：通过动态设置空白填充高度和只渲染视口内项目优化渲染性能。
  - 响应式设计：监听 resize 和 orientationchange 事件自适应窗口变化。

### 2.系统关键设计说明
>  核心目标：解决大数据量列表渲染时的性能问题，通过仅渲染视口范围内的列表项，降低 DOM 节点数量，提升页面流畅度。

- 关键功能实现：
  - 虚拟滚动：
    - 计算当前滚动位置和视口范围，仅加载可见范围内的数据。
    - 动态调整上下空白区域，模拟完整列表的滚动效果。
  - 动态高度支持：
    - 使用 ResizeObserver 实时监测每个项目高度，支持高度动态变化。
    - 结合预估高度，在缺少具体高度数据时提供合理默认值。
  - 无限滚动加载：
    - 滚动到接近底部时自动请求新数据并更新列表。
    - 提供加载状态提示。
  - 性能优化：
    - 滚动事件使用 throttle 限制触发频率，避免性能瓶颈。
    - 设置缓冲区域，避免快速滚动时白屏。
  - 其他功能：
    - 水平和垂直滚动模式支持。
    - 路由切换时保持滚动位置。
- 代码设计亮点：
  - 使用 Composition API 和 TypeScript 提升代码可读性和类型安全性。
  - 解耦组件逻辑，区分数据加载、滚动监听和视口计算等功能。
  - 响应式数据绑定确保组件状态实时更新。

### 3. 过程中遇到的问题
- 滚动抖动问题：
  - 问题描述：滚动时由于计算空白区域高度不准确，导致滚动条位置不稳定。
  - 解决方案：通过动态计算每项高度并使用 ResizeObserver 实时更新，确保空白填充高度精准。

- 快速滚动白屏问题：
  - 问题描述：用户快速滚动时，新的数据未及时加载，导致白屏。
  - 解决方案：设置上下缓冲区，提前加载视口外的少量数据。

- 动态高度列表的计算复杂性：
  - 问题描述：列表项高度不统一，计算当前显示项的范围复杂。
  - 解决方案：记录每项高度并动态更新，通过累积高度计算索引范围。

- 路由切换后的滚动位置恢复：
  - 问题描述：切换路由后滚动条位置丢失。
  - 解决方案：在组件激活时，通过 onActivated 恢复滚动位置。

### 4. 常见的面试追问题
- 技术实现：
  - 为什么选择 ResizeObserver？它有哪些优点？
  - 如何处理列表项高度过高或过低的极端情况？
  - 垂直和水平滚动的实现逻辑有哪些异同？

- 性能优化：
  - 滚动事件优化中，throttle 和 debounce 有何区别，为什么选择 throttle？
  - 在海量数据的场景中，如何进一步提升滚动性能？

- 组件扩展性：
  - 如果需要增加拖拽排序功能，虚拟滚动组件该如何适配？
    如何支持复杂的嵌套数据结构（例如树形列表）？

- 项目问题解决：
  - 你在调试过程中是如何定位滚动抖动问题的？
  - 如果 ResizeObserver 不兼容某些浏览器，如何降级处理？

- 真实场景：
  - 虚拟滚动适合什么场景？哪些场景不适用？
  - 如果在一个多页面项目中使用虚拟滚动组件，如何管理数据缓存以提升用户体验？
